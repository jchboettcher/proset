(this["webpackJsonpprojective-set"]=this["webpackJsonpprojective-set"]||[]).push([[0],{86:function(t,e,i){"use strict";i.r(e);var n,r,s,o,a,h,c,l,p,d,u,f,b,m,x,j,v,g,y,O,w=i(1),k=i(55),E=i.n(k),S=i(91),T=i(36),A=i(9),M=i(10),C={fonts:{primary:{family:"Arial, Helvetica, sans-serif"}}},N=i(59),R=i(68),B=i(70),I=i(58),$=i(15),z=new B.a({uri:"https://games-leaderboard-backend.herokuapp.com/",credentials:"include"}),D=new $.a((function(t,e){var i=localStorage.getItem("token");return i&&t.setContext({headers:{authorization:i}}),e(t)})),W=Object(I.a)((function(){})),L=new N.a({cache:new R.a,link:$.a.from([W,D,z])}),U=i(33),Y=i(8),q=M.b.div(n||(n=Object(Y.a)(["\n  display: flex;\n  flex-direction: column;\n"]))),P=M.b.div(r||(r=Object(Y.a)(["\n  display: flex;\n  flex-direction: row;\n"]))),G=M.b.div(s||(s=Object(Y.a)(["\n  padding-left: 40px;\n  padding-bottom: 75px;\n  display: flex;\n  flex-direction: column;\n"]))),H=M.b.div(o||(o=Object(Y.a)(["\n  display: flex;\n  justify-content: left;\n  margin-left: 60px;\n  margin-right: 60px;\n  margin-top: 10px;\n"]))),_=M.b.div(a||(a=Object(Y.a)(["\n  height: 35px;\n"]))),F=M.b.h1(h||(h=Object(Y.a)(["\n  font-weight: bold;\n  font-size: 40px;\n  font-family: ",";\n  margin-bottom: 0;\n"])),(function(t){return t.theme.fonts.primary.family})),X=M.b.h3(c||(c=Object(Y.a)(["\n  font-weight: normal;\n  font-style: italic;\n  font-size: 18px;\n  font-family: ",";\n  margin-top: 0;\n  margin-bottom: 0;\n"])),(function(t){return t.theme.fonts.primary.family})),J=M.b.p(l||(l=Object(Y.a)(["\n  font-family: ",";\n  font-size: 15px;\n  margin-bottom: 25px;\n"])),(function(t){return t.theme.fonts.primary.family})),Z=M.b.td(p||(p=Object(Y.a)(["\n  padding: 5px;\n  border: solid;\n  font-family: ",";\n  font-size: 13px;\n  border-color: black;\n  border-width: 1.5px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n"])),(function(t){return t.theme.fonts.primary.family})),Q=Object(M.b)(Z)(d||(d=Object(Y.a)(["\n  width: 35px;\n  max-width: 35px;\n"]))),K=Object(M.b)(Z)(u||(u=Object(Y.a)(["\n  width: 155px;\n  max-width: 155px;\n"]))),V=Object(M.b)(Z)(f||(f=Object(Y.a)(["\n  width: 74px;\n  max-width: 74px;\n"]))),tt=Object(M.b)(Z)(b||(b=Object(Y.a)(["\n  width: 113px;\n  max-width: 113px;\n"]))),et=M.b.table(m||(m=Object(Y.a)(["\n  border-collapse: collapse;\n"]))),it=M.b.tbody(x||(x=Object(Y.a)(["\n  background-color: rgb(247,247,247);\n"]))),nt=M.b.thead(j||(j=Object(Y.a)(["\n  font-weight: bold;\n  background-color: rgb(210,210,210);\n"]))),rt=M.b.h1(v||(v=Object(Y.a)(["\n  margin-top: 0px;\n  font-family: ",";\n  font-size: 24px;\n  font-weight: bold;\n"])),(function(t){return t.theme.fonts.primary.family})),st=i(69),ot=i(34),at=i(35),ht=i(93),ct=i(92),lt=i(65),pt=i.n(lt),dt=i(42),ut=Object(dt.a)(g||(g=Object(Y.a)(["\n  query usersBy1($game: String!, $level: Int!, $limit: Int!) {\n    usersBy1(game: $game, level: $level, limit: $limit) {\n      id\n      name\n      game\n      level\n      score1\n      score2\n      createdAt\n    }\n  }\n"]))),ft=Object(dt.a)(y||(y=Object(Y.a)(["\n  query recentUsersBy1($game: String!, $level: Int!, $limit: Int!, $time: Int!) {\n    recentUsersBy1(game: $game, level: $level, limit: $limit, time: $time) {\n      id\n      name\n      game\n      level\n      score1\n      score2\n      createdAt\n    }\n  }\n"]))),bt=Object(dt.a)(O||(O=Object(Y.a)(["\n  mutation addUser($input: AddUser!) {\n    addUser(input: $input) {\n      id\n      name\n      game\n      level\n      score1\n      score2\n      createdAt\n    }\n  }\n"]))),mt=i(4),xt=function(t){var e=t.level,i=t.setEntry,n=Object(A.g)();Object(w.useEffect)((function(){document.title="ProSet - ".concat(e)}),[e]);var r,s,o,a,h,c,l,p,d,u,f,b,m,x,j,v,g=Object(ht.a)(ut,{variables:{game:"proset",level:parseInt(e),limit:yt},partialRefetch:!0,onError:function(t){},onCompleted:function(t){}}),y=g.data,O=g.error,k=g.loading,E=Object(ht.a)(ft,{variables:{game:"proset",level:parseInt(e),limit:Ot,time:864e5},partialRefetch:!0,onError:function(t){},onCompleted:function(t){}}),S=E.data,T=E.error,M=E.loading,C=Object(ct.a)(bt,{refetchQueries:[{query:ut,variables:{game:"proset",level:parseInt(e),limit:yt}},{query:ft,variables:{game:"proset",level:parseInt(e),limit:Ot,time:864e5}}],onError:function(t){},onCompleted:function(t){}}),N=Object(U.a)(C,2),R=N[0],B=N[1],I=(B.data,B.error),$=B.loading,z=120,D=20,W=80,L=z,Y=[],q=[],P=[],G=[],H=["New","Deselect","Submit"],_=127.6,F=0,X=function(t){r=parseInt(e),a=(s=5==r||6==r?600/7:z)/(2*(o=r>6?3:2)+1),h=Math.ceil((r+1)/2),c=[h,r+1-h],l=Math.pow(2,r),x=[t.color(20,20,240),t.color(230,0,0),t.color(0,210,0),t.color(20,20,240)],t.textSize(17),(m=H.map((function(e){return 1.21*t.textWidth(e)+34})))[3]=11,u=new tt(2,t),d=new tt(1,t),f=new tt(0,t),b=new tt(3,t),v=new K(W/3,40,t),j=new V(183.93333333333334,30,u.x-W-8-_,20,t);for(var i=4;i<10;i++)m[i]=m[3],G.push(new tt(i,t)),x.push(t.color(20,20,240));(q=[t.color(255,0,0),t.color(255,255,0),t.color(0,0,255),t.color(0,128,0),t.color(255,0,255),t.color(0,255,0),t.color(0,255,255)]).push(t.color(0)),q.push(t.color(255));for(var n=0;n<9;n++){var p=n%o,g=(n-p)/o;Y.push({r:p,c:g})}if(r>6){var y=[0,1,6,2,3,7,4,5,8];Y.sort((function(t,e){return y[Y.indexOf(t)]-y[Y.indexOf(e)]}))}for(var O=r;O>=0;O--){var w=O<h?0:1,k=O%h,E=c[w]*(s+D)-D;P.push({x:-E/2+k*(s+D),y:140*w-130})}J(t)},J=function(t){p=[];for(var e=l-1;e>0;e--)p.push(new Q(e.toString(2).padStart(r,"0").split("").map((function(t){return"1"==t})),t));for(var i=l-2;i>0;i--){var n=Math.floor(Math.random()*(i+1)),s=p[n];p[n]=p[i],p[i]=s}j.reset(),v.reset(),F=0},Z=function(t){G.forEach((function(e){return e.visible=t}))},Q=function(){function t(e,i){Object(ot.a)(this,t),this.dots=e,this.selected=!1,this.angle=0,this.t=100,this.dir=i.random([-1,1]),this.dir*=i.random(.9,1.8),this.colort=1,this.entert=0,this.p5=i}return Object(at.a)(t,[{key:"select",value:function(){this.selected=!this.selected,this.jiggle()}},{key:"jiggle",value:function(){this.t=0,this.dir=this.p5.random([-1,1]),this.dir*=this.p5.random(.9,1.8)}},{key:"alarm",value:function(){this.jiggle(),this.colort=0}},{key:"enter",value:function(){this.entert=1}},{key:"update",value:function(){this.t+=.3,this.angle=.1*this.dir*Math.pow(1.4,-this.t)*Math.sin(this.t),this.colort<1&&(this.colort+=.025),this.entert>0&&(this.entert-=.04)}},{key:"show",value:function(t){var e=t.x,i=t.y;if(this.p5.push(),this.p5.translate(e+s/2,i+60),this.p5.translate(0,this.p5.lerp(0,340,this.entert)),this.p5.stroke(0),this.p5.fill(255),this.p5.rotate(this.angle),this.selected){this.p5.scale(1.05),this.p5.strokeWeight(3),this.p5.colorMode(this.p5.HSB);var n=this.p5.color(5,97,100),o=this.p5.color(120,100,78);this.p5.colorMode(this.p5.RGB),this.p5.stroke(this.p5.lerpColor(n,o,this.colort))}this.p5.translate(-s/2,-60),this.p5.rect(0,0,s,L,5),this.p5.stroke(0),this.p5.strokeWeight(1);for(var h=0;h<r;h++)if(this.dots[h]){var c=Y[h],l=c.r,p=c.c;this.p5.fill(q[h]),this.p5.ellipse((2*l+1.5)*a,(2*p+1.5)*a,1.25*a)}this.p5.pop()}}]),t}(),K=function(){function t(e,i,n){Object(ot.a)(this,t),this.x=e,this.y=i,this.start=Date.now(),this.p5=n}return Object(at.a)(t,[{key:"reset",value:function(){this.start=Date.now(),this.done=void 0}},{key:"end",value:function(){this.done=new Date(Date.now()-this.start)}},{key:"getTime",value:function(){return this.done?this.done:new Date(Date.now()-this.start)}},{key:"getTimeString",value:function(){var t=this.getTime();return["".concat(Math.floor(t.getTime()/36e5)),"".concat(this.pad(t.getMinutes()),":").concat(this.pad(t.getSeconds()),".").concat(this.pad(Math.floor(t.getMilliseconds()/10)))]}},{key:"pad",value:function(t){return(t<10?"0":"")+t}},{key:"show",value:function(){this.p5.push();var t=this.getTimeString(),e=Object(U.a)(t,2),i=e[0],n=e[1];this.p5.noStroke(),this.p5.textSize(_/(4.17041015625+.55615234375*i.length)),this.p5.translate(this.x+_-this.p5.textWidth(":00:00.00"),this.y),this.p5.fill(0),this.p5.textAlign(this.p5.LEFT,this.p5.CENTER),this.p5.text(":"+n,0,0),this.p5.textAlign(this.p5.RIGHT,this.p5.CENTER),this.p5.text(i,0,0),this.p5.pop()}}]),t}(),V=function(){function t(e,i,n,r,s){Object(ot.a)(this,t),this.x=e,this.y=i,this.w=n,this.h=r,this.reset(),this.p5=s}return Object(at.a)(t,[{key:"reset",value:function(){this.t=0,this.prev=0,this.next=0}},{key:"update",value:function(t){this.t=0,this.prev=this.next,this.next+=t}},{key:"show",value:function(){this.t<1&&(this.t+=.04),this.p5.push(),this.p5.translate(this.x,this.y),this.p5.fill(255),this.p5.rect(0,0,this.w,this.h),this.p5.fill(0,200,0),this.p5.noStroke(),this.p5.rect(.5,.5,Math.max(this.p5.lerp(this.prev,this.next,this.t)/(l-1)*this.w-1,0),this.h-1);var t=Math.floor(this.p5.lerp(this.prev,this.next,this.t))+" / "+(l-1);this.p5.fill(0),this.p5.textSize(14),this.p5.translate(this.w-(this.h-11)/2,this.h/2),this.p5.textAlign(this.p5.RIGHT,this.p5.CENTER),this.p5.text(t,0,0),this.p5.pop()}}]),t}(),tt=function(){function t(e,i){Object(ot.a)(this,t),this.w=m[e],e>3&&(this.w*=1.7),this.h=e<3?30:this.w,this.txt=e<3?H[e]:""+e;var n=e<3?e+1:1,r=e<3?m.slice(0,n).reduce((function(t,e){return e+t}),0):2+this.w;this.x=i.width-30*n-r,this.y=25+(e<3?0:2),e>3&&(this.x-=(1-e%2)*this.w+.75,this.y+=Math.floor((e-2)/2)*this.h-this.h+m[e]+1.75),this.id=e,this.visible=e<4,this.corners=e<4?[1,1,1,1]:[4==e,5==e,9==e,8==e],this.p5=i}return Object(at.a)(t,[{key:"over",value:function(){if(!this.visible)return!1;3==this.id&&(this.x-=1,this.y-=2,this.w+=3,this.h+=3);var t=this.p5.mouseX>=this.x&&this.p5.mouseX<this.x+this.w&&this.p5.mouseY>=this.y&&this.p5.mouseY<this.y+this.h;return 3==this.id&&(this.x+=1,this.y+=2,this.w-=3,this.h-=3),3!=this.id&&0!=this.id||(t=G.reduce((function(t,e){return t||e.over()}),t)),t}},{key:"show",value:function(){var t,e=this;if(this.visible){this.p5.push();var i=3!=this.id?!this.over():this.over()&&f.over()||!this.over()&&!f.over()||G[0].visible;if(this.p5.fill(i?x[this.id]:255),this.p5.stroke(this.id>=3?x[this.id]:i?0:x[this.id]),3!=this.id?this.p5.strokeWeight(this.id>3?1.5:i?1:1.5):this.p5.noStroke(),this.p5.translate(this.x+this.w/2,this.y+this.h/2),this.p5.rectMode(this.p5.CENTER),(t=this.p5).rect.apply(t,[0,0,this.w,this.h].concat(Object(st.a)(this.corners.map((function(t){return 5*t*(e.id<3?.7:.35)}))))),this.p5.noStroke(),3!=this.id)this.p5.textAlign(this.p5.CENTER,this.p5.CENTER),this.p5.fill(this.over()?x[this.id]:255),this.p5.textSize(this.id<3?17:14),this.p5.text(this.txt,0,0);else{var n=.6*this.w;this.p5.fill(i?255:x[this.id]),this.p5.translate(0,-.5),this.p5.triangle(-n/2,-n/(2*Math.sqrt(3)),n/2,-n/(2*Math.sqrt(3)),0,n/Math.sqrt(3))}this.p5.pop()}}}]),t}();return Object(mt.jsx)(pt.a,{setup:function(t,e){t.createCanvas(840,460).parent(e),X(t)},draw:function(t){if(t.background(247),t.push(),k||M||O||T)return t.textAlign(t.CENTER,t.CENTER),t.textStyle(t.BOLD),t.fill(255,255,255,200),t.stroke(0),t.strokeWeight(3),t.translate(t.width/2,t.height/2),void(k||M?(t.textSize(80),t.text("Loading...",0,0)):(t.textSize(43),t.translate(0,-t.textAscent()-10),t.text("Sorry, could not access leaderboard!",0,0),t.translate(0,t.textAscent()+10),t.text("Please check your network connection",0,0),t.translate(0,t.textAscent()+10),t.text("and refresh the page.",0,0)));if(t.strokeWeight(1),t.textStyle(t.NORMAL),t.fill(210),t.rect(.5,.5,t.width-1,79),p){b.over()?Z(!0):b.over()||f.over()||Z(!1),u.show(),d.show(),f.show(),b.show(),G.forEach((function(t){return t.show()})),j.show(),v.show(),t.translate(t.width/2,t.height/2+40);for(var e=0;e<r+1;e++){var n=p[e];n&&(n.show(P[e]),n.update())}if(v.done){if(t.textAlign(t.CENTER,t.CENTER),t.textSize(70),t.fill(0),t.textStyle(t.BOLDITALIC),t.text("Good job!",0,0),5==F){var s=v.getTime().getTime();if(s=10*Math.floor(s/10),!O&&!T){var o=y.usersBy1.length,a=S.recentUsersBy1.length;if(o!=yt||a!=Ot||y.usersBy1[yt-1].score1>s||S.recentUsersBy1[Ot-1].score1>s){var h=prompt("You made the leaderboard! Name?");i({name:h=h||"anonymous",score1:s}),R({variables:{input:{name:h,game:"proset",level:r,score1:s,score2:0}}})}}}j.t>.95&&(F+=1)}}else X(t);(k||M||$||O||T||I)&&(t.textAlign(t.CENTER,t.CENTER),t.textStyle(t.BOLD),t.fill(255,255,255,200),t.stroke(0),t.strokeWeight(3),k||M||$?(t.textSize(60),t.translate(0,-40-t.textAscent()/2-5),t.text("Submitting score...",0,0),t.translate(0,t.textAscent()+10),t.text("Don't refresh the page.",0,0)):(t.textSize(43),t.translate(0,-40-t.textAscent()-10),t.text("Sorry, could not access leaderboard!",0,0),t.translate(0,t.textAscent()+10),t.text("Please check your network connection",0,0),t.translate(0,t.textAscent()+10),t.text("and refresh the page.",0,0))),t.pop()},mousePressed:function(t){if(p){for(var e=0;e<r+1;e++){var i=P[e],o=i.x,a=i.y;o+=t.width/2,a+=t.height/2+40,t.mouseX>=o&&t.mouseX<o+s&&t.mouseY>=a&&t.mouseY<a+L&&p[e]&&p[e].select()}if(d.over())p.slice(0,r+1).forEach((function(t){t&&t.selected&&t.select()}));else if(f.over())if(b.over()){var h=G.reduce((function(t,e){return e.over()?e:t}),null);if(h){Z(!1);var c=h.id;c!=r?n.push("".concat(c)):J(t)}}else Z(!1),J(t);else u.over()&&function(){var t=p.slice(0,r+1).filter((function(t){return!!t&&t.selected}));0==t.reduce((function(t,e){return e.dots.map((function(e,i){return e+t[i]}))}),Array(r).fill(0)).reduce((function(t,e){return t+e%2}),0)?(t.forEach((function(t){var e=p.indexOf(t);p[e]=p[r+1],p[e]&&p[e].enter(),p.splice(r+1,1)})),j.update(t.length),j.next==l-1&&v.end()):t.forEach((function(t){return t.alarm()}))}()}}})},jt=i(71),vt=function(t){var e=t.index,i=t.name,n=t.score1,r=t.createdAt,s=t.bold,o=function(t){return(t<10?"0":"")+t},a={},h={};return s&&(a.fontWeight="bold",h.fontWeight="bold"),"anonymous"==i&&(h.fontStyle="italic"),Object(mt.jsxs)("tr",{children:[Object(mt.jsx)(Q,{style:a,children:"".concat(e+1)}),Object(mt.jsx)(K,{style:h,children:"".concat(i)}),Object(mt.jsx)(V,{style:a,children:"".concat(function(t){var e=Math.floor(t/36e5);t%=36e5;var i=Math.floor(t/6e4);t%=6e4;var n=Math.floor(t/1e3);t%=1e3;var r=Math.floor(t/10);return"".concat(e,":").concat(o(i),":").concat(o(n),".").concat(o(r))}(n))}),Object(mt.jsx)(tt,{style:a,children:"".concat(function(t){var e=t.substring(0,10),i=t.substring(11,19),n=new Date(e+"T"+i+"+00:00"),r=n.toLocaleDateString("en-US",{timeZone:"America/New_York",day:"numeric",month:"numeric",year:"2-digit"});return n.toLocaleTimeString("en-GB",{timeZone:"America/New_York",hour:"numeric",minute:"numeric",second:"numeric"})+", "+r}(r))})]})},gt=function(t){var e=t.level,i=t.boldEntry,n=t.recent,r=n?ft:ut,s=n?"recentUsersBy1":"usersBy1",o=Object(ht.a)(r,{variables:{game:"proset",level:parseInt(e),limit:n?Ot:yt,time:864e5},partialRefetch:!0,onError:function(t){},onCompleted:function(t){}}),a=o.data,h=o.error,c=o.loading;return Object(mt.jsxs)(mt.Fragment,{children:[Object(mt.jsxs)(et,{children:[Object(mt.jsx)(nt,{children:Object(mt.jsxs)("tr",{children:[Object(mt.jsx)(Q,{children:"Rank"}),Object(mt.jsx)(K,{id:"Name",children:"Name"}),Object(mt.jsx)(V,{children:"Time"}),Object(mt.jsx)(tt,{children:"Timestamp (ET)"})]})}),Object(mt.jsx)(it,{children:c||!!h||function(t){for(var e=null,n=0;n<t[s].length;n++){var r=t[s][n];r&&(r.bold=!1),r&&i&&i.name==r.name&&i.score1==r.score1&&(e=n)}return null!=e&&(t[s][e].bold=!0),t}(a)[s].map((function(t,e){return t?Object(mt.jsx)(vt,Object(jt.a)({index:e},t),t.id):""}))})]}),c&&Object(mt.jsx)(J,{children:"Fetching data..."}),!!h&&Object(mt.jsx)(J,{children:"Failed to fetch data, try refreshing the page."})]})},yt=100,Ot=10,wt=function(){var t=Object(A.h)().level,e=Object(w.useState)({}),i=Object(U.a)(e,2),n=i[0],r=i[1];return Object(mt.jsx)(H,{children:Object(mt.jsxs)(q,{children:[Object(mt.jsx)(F,{children:"Projective Set"}),Object(mt.jsxs)(X,{children:["(",Object(mt.jsx)("a",{href:"https://github.com/jchboettcher/proset",children:"source code"}),")"]}),Object(mt.jsxs)(J,{children:[Object(mt.jsx)("a",{href:"https://en.wikipedia.org/wiki/Projective_Set_(game)",children:"ProSet"})," is a logic game based on the older game ",Object(mt.jsx)("a",{href:"https://en.wikipedia.org/wiki/Set_(game)",children:"Set"}),". Normally, you play against other players live, but in this single player version, you race against the clock instead. You're still racing against other players though, let's see if you can make the leaderboard! The goal is to go through the entire deck of cards by identifying \"sets\" in the current hand. Cards form a set when the aggregate number of dots of each color is an even number. Every card is unique: every possible card within the appropriate number of dots is in the deck exactly once (except for the trivial blank card). When you submit a valid set, those cards will disappear and you'll be dealt new cards to fill their spots. You win when you deplete the whole deck."]}),Object(mt.jsxs)(P,{children:[Object(mt.jsx)(xt,{level:t,setEntry:r}),Object(mt.jsxs)(G,{children:[Object(mt.jsx)(rt,{children:"Last 24 Hours (top ".concat(Ot,")")}),Object(mt.jsx)(gt,{level:t,boldEntry:n,recent:!0}),Object(mt.jsx)(_,{}),Object(mt.jsx)(rt,{children:"All Time (top ".concat(yt,")")}),Object(mt.jsx)(gt,{level:t,boldEntry:n})]})]})]})})},kt=function(){return Object(mt.jsx)(T.a,{basename:"/proset",children:Object(mt.jsx)(M.a,{theme:C,children:Object(mt.jsx)(S.a,{client:L,children:Object(mt.jsx)("div",{className:"App",children:Object(mt.jsxs)(A.d,{children:[Object(mt.jsx)(A.b,{exact:!0,path:"/:level(4|5|6|7|8|9)",component:wt}),Object(mt.jsx)(A.a,{to:"/6"})]})})})})})};E.a.render(Object(mt.jsx)(kt,{}),document.getElementById("root"))}},[[86,1,2]]]);
//# sourceMappingURL=main.8c202e2a.chunk.js.map