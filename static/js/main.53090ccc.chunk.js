(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{112:function(t,e,i){"use strict";i.r(e);var n,r,s,o,a,h,c,l,d,p,u,b,f,j,x,g,v,m,O,w,y,k,E,S,M,T,A,C=i(2),I=i(83),R=i.n(I),z=i(113),B=i(53),N=i(12),D=i(10),F={colors:{primaryText:"#232323",mainBackground:"#F2F2F2"},fonts:{primary:{family:"Source Sans Pro, sans-serif",weight:400}}},H=i(86),W=i(96),$=i(98),P=i(85),q=i(18),Y=new $.a({uri:"https://games-leaderboard-backend.herokuapp.com/",credentials:"include"}),G=new q.a((function(t,e){var i=localStorage.getItem("token");return i&&t.setContext({headers:{authorization:i}}),e(t)})),X=Object(P.a)((function(){})),L=new H.a({cache:new W.a,link:q.a.from([X,G,Y])}),Q=i(48),U=i(8),_=D.b.div(n||(n=Object(U.a)(["\n  display: flex;\n  flex-direction: column;\n  /* margin: 100px; */\n  /* background-color: palegoldenrod; */\n"]))),J=D.b.div(r||(r=Object(U.a)(["\n  display: flex;\n  flex-direction: row;\n"]))),K=D.b.div(s||(s=Object(U.a)(["\n  padding: 0px 0px 0px 50px;\n  display: flex;\n  flex-direction: column;\n"]))),V=D.b.div(o||(o=Object(U.a)(["\n  display: flex;\n  justify-content: left;\n  /* width: 100vw;\n  height: 100%; */\n  margin-left: 60px;\n  margin-right: 60px;\n  margin-top: 10px;\n"]))),Z=D.b.h1(a||(a=Object(U.a)(["\n  font-weight: bold;\n  font-size: 40px;\n  font-family: Arial, Helvetica, sans-serif;\n  margin-bottom: 0;\n"]))),tt=(D.b.h3(h||(h=Object(U.a)(["\n  font-weight: bold;\n  font-size: 18px;\n  font-family: Arial, Helvetica, sans-serif;\n  margin-top: 0;\n  margin-bottom: 0;\n"]))),D.b.p(c||(c=Object(U.a)(["\n  font-family: Arial, Helvetica, sans-serif;\n  font-size: 15px;\n  /* margin-top: 10px; */\n  margin-bottom: 25px;\n"])))),et=D.b.td(l||(l=Object(U.a)(["\n  padding: 7px;\n  border: solid;\n  font-family: Arial, Helvetica, sans-serif;\n  font-size: 15px;\n  border-color: black;\n  border-width: 1.5px;\n"]))),it=Object(D.b)(et)(d||(d=Object(U.a)(["\n  width: 52px;\n"]))),nt=Object(D.b)(et)(p||(p=Object(U.a)(["\n  width: 100px;\n"]))),rt=Object(D.b)(et)(u||(u=Object(U.a)(["\n  width: 200px;\n"]))),st=D.b.table(b||(b=Object(U.a)(["\n  border-collapse: collapse;\n  /* margin: 10px; */\n"]))),ot=D.b.tbody(f||(f=Object(U.a)(["\n  background-color: rgb(247,247,247);\n"]))),at=D.b.thead(j||(j=Object(U.a)(["\n  font-weight: bold;\n  font-size: 18px;\n  background-color: rgb(210,210,210);\n"]))),ht=i(97),ct=i(49),lt=i(50),dt=i(92),pt=i.n(dt),ut=i(35),bt=Object(ut.a)(x||(x=Object(U.a)(["\n  query usersBy1($game: String!, $level: Int!, $limit: Int!) {\n    usersBy1(game: $game, level: $level, limit: $limit) {\n      id\n      name\n      game\n      level\n      score1\n      score2\n      createdAt\n    }\n  }\n"]))),ft=Object(ut.a)(g||(g=Object(U.a)(["\n  mutation addUser($input: AddUser!) {\n    addUser(input: $input) {\n      id\n      name\n      game\n      level\n      score1\n      score2\n      createdAt\n    }\n  }\n"]))),jt=i(5),xt=function(t){var e,i,n,r,s,o,a,h,c,l,d,p,u,b,f,j,x=t.level,g=t.setEntry,v=Object(N.g)(),m=Object(z.useQuery)(bt,{variables:{game:"proset",level:parseInt(x),limit:10},partialRefetch:!0,onError:function(t){},onCompleted:function(t){}}),O=m.data,w=(m.error,m.loading,Object(z.useMutation)(ft,{refetchQueries:[{query:bt,variables:{game:"proset",level:parseInt(x),limit:10}}],onError:function(t){},onCompleted:function(t){}})),y=Object(Q.a)(w,2),k=y[0],E=y[1],S=(E.data,E.error,E.loading,120),M=20,T=80,A=S,C=[],I=[],R=[],B=[],D=["New","Deselect","Submit"],F=127.6,H=0,W=function(t){e=parseInt(x),r=(i=5==e||6==e?600/7:S)/(2*(n=e>6?3:2)+1),s=Math.ceil((e+1)/2),o=[s,e+1-s],a=Math.pow(2,e),H=0,b=[t.color(20,20,240),t.color(230,0,0),t.color(0,210,0),t.color(20,20,240)],t.textSize(17),(u=D.map((function(e){return 1.21*t.textWidth(e)+34})))[3]=11,l=new X(2,t),c=new X(1,t),d=new X(0,t),p=new X(3,t),j=new Y(T/3,40,t),f=new G(183.93333333333334,30,l.x-T-8-F,20,t);for(var h=4;h<10;h++)u[h]=u[3],B.push(new X(h,t)),b.push(t.color(20,20,240));(I=[t.color(255,0,0),t.color(255,255,0),t.color(0,0,255),t.color(0,128,0),t.color(255,0,255),t.color(0,255,0),t.color(0,255,255)]).push(t.color(0)),I.push(t.color(255));for(var g=0;g<9;g++){var v=g%n,m=(g-v)/n;C.push({r:v,c:m})}if(e>6){var O=[0,1,6,2,3,7,4,5,8];C.sort((function(t,e){return O[C.indexOf(t)]-O[C.indexOf(e)]}))}for(var w=e;w>=0;w--){var y=w<s?0:1,k=w%s,E=o[y]*(i+M)-M;R.push({x:-E/2+k*(i+M),y:140*y-130})}$(t)},$=function(t){h=[];for(var i=a-1;i>0;i--)h.push(new q(i.toString(2).padStart(e,"0").split("").map((function(t){return"1"==t})),t));for(var n=a-2;n>0;n--){var r=Math.floor(Math.random()*(n+1)),s=h[r];h[r]=h[n],h[n]=s}f.reset(),j.reset()},P=function(t){B.forEach((function(e){return e.visible=t}))},q=function(){function t(e,i){Object(ct.a)(this,t),this.dots=e,this.selected=!1,this.angle=0,this.t=100,this.dir=i.random([-1,1]),this.dir*=i.random(.9,1.8),this.colort=1,this.entert=0,this.p5=i}return Object(lt.a)(t,[{key:"select",value:function(){this.selected=!this.selected,this.jiggle()}},{key:"jiggle",value:function(){this.t=0,this.dir=this.p5.random([-1,1]),this.dir*=this.p5.random(.9,1.8)}},{key:"alarm",value:function(){this.jiggle(),this.colort=0}},{key:"enter",value:function(){this.entert=1}},{key:"update",value:function(){this.t+=.3,this.angle=.1*this.dir*Math.pow(1.4,-this.t)*Math.sin(this.t),this.colort<1&&(this.colort+=.025),this.entert>0&&(this.entert-=.04)}},{key:"show",value:function(t){var n=t.x,s=t.y;if(this.p5.push(),this.p5.translate(n+i/2,s+60),this.p5.translate(0,this.p5.lerp(0,340,this.entert)),this.p5.stroke(0),this.p5.fill(255),this.p5.rotate(this.angle),this.selected){this.p5.scale(1.05),this.p5.strokeWeight(3),this.p5.colorMode(this.p5.HSB);var o=this.p5.color(5,97,100),a=this.p5.color(120,100,78);this.p5.colorMode(this.p5.RGB),this.p5.stroke(this.p5.lerpColor(o,a,this.colort))}this.p5.translate(-i/2,-60),this.p5.rect(0,0,i,A,5),this.p5.stroke(0),this.p5.strokeWeight(1);for(var h=0;h<e;h++)if(this.dots[h]){var c=C[h],l=c.r,d=c.c;this.p5.fill(I[h]),this.p5.ellipse((2*l+1.5)*r,(2*d+1.5)*r,1.25*r)}this.p5.pop()}}]),t}(),Y=function(){function t(e,i,n){Object(ct.a)(this,t),this.x=e,this.y=i,this.start=Date.now(),this.p5=n}return Object(lt.a)(t,[{key:"reset",value:function(){this.start=Date.now(),this.done=void 0}},{key:"end",value:function(){this.done=new Date(Date.now()-this.start)}},{key:"getTime",value:function(){return this.done?this.done:new Date(Date.now()-this.start)}},{key:"getTimeString",value:function(){var t=this.getTime();return["".concat(Math.floor(t.getTime()/36e5)),"".concat(this.pad(t.getMinutes()),":").concat(this.pad(t.getSeconds()),".").concat(this.pad(Math.floor(t.getMilliseconds()/10)))]}},{key:"pad",value:function(t){return(t<10?"0":"")+t}},{key:"show",value:function(){this.p5.push();var t=this.getTimeString(),e=Object(Q.a)(t,2),i=e[0],n=e[1];this.p5.textSize(F/(4.17041015625+.55615234375*i.length)),this.p5.translate(this.x+F-this.p5.textWidth(":00:00.00"),this.y),this.p5.fill(0),this.p5.textAlign(this.p5.LEFT,this.p5.CENTER),this.p5.text(":"+n,0,0),this.p5.textAlign(this.p5.RIGHT,this.p5.CENTER),this.p5.text(i,0,0),this.p5.pop()}}]),t}(),G=function(){function t(e,i,n,r,s){Object(ct.a)(this,t),this.x=e,this.y=i,this.w=n,this.h=r,this.reset(),this.p5=s}return Object(lt.a)(t,[{key:"reset",value:function(){this.t=0,this.prev=0,this.next=0}},{key:"update",value:function(t){this.t=0,this.prev=this.next,this.next+=t}},{key:"show",value:function(){this.t<1&&(this.t+=.04),this.p5.push(),this.p5.translate(this.x,this.y),this.p5.fill(255),this.p5.rect(0,0,this.w,this.h),this.p5.fill(0,200,0),this.p5.noStroke(),this.p5.rect(.5,.5,Math.max(this.p5.lerp(this.prev,this.next,this.t)/(a-1)*this.w-1,0),this.h-1);var t=Math.floor(this.p5.lerp(this.prev,this.next,this.t))+" / "+(a-1);this.p5.fill(0),this.p5.textSize(14),this.p5.translate(this.w-(this.h-11)/2,this.h/2),this.p5.textAlign(this.p5.RIGHT,this.p5.CENTER),this.p5.text(t,0,0),this.p5.pop()}}]),t}(),X=function(){function t(e,i){Object(ct.a)(this,t),this.w=u[e],e>3&&(this.w*=1.7),this.h=e<3?30:this.w,this.txt=e<3?D[e]:""+e;var n=e<3?e+1:1,r=e<3?u.slice(0,n).reduce((function(t,e){return e+t}),0):2+this.w;this.x=i.width-30*n-r,this.y=25+(e<3?0:2),e>3&&(this.x-=(1-e%2)*this.w+.75,this.y+=Math.floor((e-2)/2)*this.h-this.h+u[e]+1.75),this.id=e,this.visible=e<4,this.corners=e<4?[1,1,1,1]:[4==e,5==e,9==e,8==e],this.p5=i}return Object(lt.a)(t,[{key:"over",value:function(){if(!this.visible)return!1;3==this.id&&(this.x-=1,this.y-=2,this.w+=3,this.h+=3);var t=this.p5.mouseX>=this.x&&this.p5.mouseX<this.x+this.w&&this.p5.mouseY>=this.y&&this.p5.mouseY<this.y+this.h;return 3==this.id&&(this.x+=1,this.y+=2,this.w-=3,this.h-=3),3!=this.id&&0!=this.id||(t=B.reduce((function(t,e){return t||e.over()}),t)),t}},{key:"show",value:function(){var t,e=this;if(this.visible){this.p5.push();var i=3!=this.id?!this.over():this.over()&&d.over()||!this.over()&&!d.over()||B[0].visible;if(this.p5.fill(i?b[this.id]:255),this.p5.stroke(this.id>=3?b[this.id]:i?0:b[this.id]),3!=this.id?this.p5.strokeWeight(this.id>3?1.5:i?1:1.5):this.p5.noStroke(),this.p5.translate(this.x+this.w/2,this.y+this.h/2),this.p5.rectMode(this.p5.CENTER),(t=this.p5).rect.apply(t,[0,0,this.w,this.h].concat(Object(ht.a)(this.corners.map((function(t){return 5*t*(e.id<3?.7:.35)}))))),this.p5.noStroke(),3!=this.id)this.p5.textAlign(this.p5.CENTER,this.p5.CENTER),this.p5.fill(this.over()?b[this.id]:255),this.p5.textSize(this.id<3?17:14),this.p5.text(this.txt,0,0);else{var n=.6*this.w;this.p5.fill(i?255:b[this.id]),this.p5.translate(0,-.5),this.p5.triangle(-n/2,-n/(2*Math.sqrt(3)),n/2,-n/(2*Math.sqrt(3)),0,n/Math.sqrt(3))}this.p5.pop()}}}]),t}();return Object(jt.jsx)(pt.a,{setup:function(t,e){t.createCanvas(840,460).parent(e),W(t)},draw:function(t){if(t.background(247),t.push(),t.fill(210),t.rect(.5,.5,t.width-1,79),h){p.over()?P(!0):p.over()||d.over()||P(!1),l.show(),c.show(),d.show(),p.show(),B.forEach((function(t){return t.show()})),f.show(),j.show(),t.translate(t.width/2,t.height/2+40);for(var i=0;i<e+1;i++){var n=h[i];n&&(n.show(R[i]),n.update())}if(j.done){if(t.textAlign(t.CENTER,t.CENTER),t.textSize(70),t.fill(0),t.textStyle(t.BOLDITALIC),t.text("Good job!",0,0),5==H){var r=j.getTime().getTime();r=10*Math.floor(r/10);var s=!0;if(10==O.usersBy1.length&&(s=O.usersBy1[9].score1>r),s){var o=prompt("Initials?");g({name:o=o||"anon.",score1:r}),k({variables:{input:{name:o,game:"proset",level:e,score1:r,score2:0}}})}}f.t>.95&&(H+=1)}}else W(t);t.pop()},mousePressed:function(t){if(h){for(var n=0;n<e+1;n++){var r=R[n],s=r.x,o=r.y;s+=t.width/2,o+=t.height/2+40,t.mouseX>=s&&t.mouseX<s+i&&t.mouseY>=o&&t.mouseY<o+A&&h[n]&&h[n].select()}if(c.over())h.slice(0,e+1).forEach((function(t){t&&t.selected&&t.select()}));else if(d.over())if(p.over()){var u=B.reduce((function(t,e){return e.over()?e:t}),null);if(u){P(!1);var b=u.id;b!=e?v.push("".concat(b)):$(t)}}else P(!1),$(t);else l.over()&&function(){var t=h.slice(0,e+1).filter((function(t){return!!t&&t.selected}));0==t.reduce((function(t,e){return e.dots.map((function(e,i){return e+t[i]}))}),Array(e).fill(0)).reduce((function(t,e){return t+e%2}),0)?(t.forEach((function(t){var i=h.indexOf(t);h[i]=h[e+1],h[i]&&h[i].enter(),h.splice(e+1,1)})),f.update(t.length),f.next==a-1&&j.end()):t.forEach((function(t){return t.alarm()}))}()}}})},gt=i(39),vt=function(t){var e=t.index,i=t.name,n=t.score1,r=t.bold,s=function(t){return(t<10?"0":"")+t},o={},a={};return r&&(o.fontWeight="bold",a.fontWeight="bold"),"anon."==i&&(a.fontStyle="italic"),Object(jt.jsxs)("tr",{children:[Object(jt.jsx)(it,{style:o,children:"".concat(e+1)}),Object(jt.jsx)(nt,{style:a,children:"".concat(i)}),Object(jt.jsx)(rt,{style:o,children:"".concat(function(t){var e=Math.floor(t/36e5);t%=36e5;var i=Math.floor(t/6e4);t%=6e4;var n=Math.floor(t/1e3);t%=1e3;var r=Math.floor(t/10);return"".concat(e,":").concat(s(i),":").concat(s(n),".").concat(s(r))}(n))})]})},mt=function(t){var e=t.index,i=t.name,n=t.score1,r=t.boldEntry,s={index:e,name:i,score1:n,bold:r.name==i&&r.score1==n};return Object(jt.jsx)(jt.Fragment,{children:Object(jt.jsx)(vt,Object(gt.a)({},s))})},Ot=function(t){var e=t.level,i=t.boldEntry,n=Object(z.useQuery)(bt,{variables:{game:"proset",level:parseInt(e),limit:10},partialRefetch:!0,onError:function(t){},onCompleted:function(t){}}),r=n.data,s=n.error,o=n.loading;return Object(jt.jsxs)(jt.Fragment,{children:[Object(jt.jsxs)(st,{children:[Object(jt.jsx)(at,{children:Object(jt.jsxs)("tr",{children:[Object(jt.jsx)(it,{children:"Rank"}),Object(jt.jsx)(nt,{children:"Initials"}),Object(jt.jsx)(rt,{children:"Time"})]})}),Object(jt.jsx)(ot,{children:o||s||r.usersBy1.map((function(t){return t?Object(jt.jsx)(mt,Object(gt.a)({index:r.usersBy1.indexOf(t),boldEntry:i},t),t.id):""}))})]}),o&&Object(jt.jsx)(tt,{children:"Fetching data..."}),s&&Object(jt.jsx)(tt,{children:"Failed to fetch data, try refreshing the page."})]})},wt=function(){var t=Object(N.h)().level;Object(C.useEffect)((function(){document.title="ProSet - ".concat(t)}),[]);var e=Object(C.useState)({}),i=Object(Q.a)(e,2),n=i[0],r=i[1];return Object(jt.jsx)(V,{children:Object(jt.jsxs)(_,{children:[Object(jt.jsx)(Z,{children:"Projective Set"}),Object(jt.jsxs)(tt,{children:[Object(jt.jsx)("a",{href:"https://en.wikipedia.org/wiki/Projective_Set_(game)",children:"ProSet"})," is a logic game based on the older game ",Object(jt.jsx)("a",{href:"https://en.wikipedia.org/wiki/Set_(game)",children:"Set"}),'. The goal is to go through the entire deck of cards by identifying "sets" in the current hand. Cards form a set when the aggregate number of dots of each color is an even number. Every card is unique: every possible card within the appropriate number of dots is in the deck exactly once (except for the trivial blank card). When you submit a valid set, those cards will disappear and you\'ll be dealt new cards to fill their spots. You win when you deplete the whole deck.']}),Object(jt.jsxs)(J,{children:[Object(jt.jsx)(xt,{level:t,setEntry:r}),Object(jt.jsx)(K,{children:Object(jt.jsx)(Ot,{level:t,boldEntry:n})})]})]})})},yt=(i(95),D.b.div(v||(v=Object(U.a)(["\n  display: flex;\n  justify-content: center;\n  width: 100vw;\n  height: 100vh;\n  margin: 0;\n  background-color: palegoldenrod;\n"]))),D.b.div(m||(m=Object(U.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-evenly;\n  padding: 10px;\n  /* border: rgba(40,40,40,0.5) 4px; */\n  /* border-style: solid; */\n  text-align: center;\n  font-family: Arial, Helvetica, sans-serif;\n  position: fixed;\n  top: 2vh;\n  /* background-color: rgba(108,128,150,0.8); */\n  /* animation: color-change 40s infinite;\n  position: center;\n  @keyframes color-change {\n    0% { background-color: rgba(100,128,150,0.8); }\n    20% { background-color: rgba(128,128,100,0.8); }\n    40% { background-color: rgba(100,128,128,0.8); }\n    60% { background-color: rgba(150,100,128,0.8); }\n    80% { background-color: rgba(128,150,100,0.8); }\n    100% { background-color: rgba(108,128,150,0.8); }\n  } */\n"]))),D.b.td(O||(O=Object(U.a)(["\n  padding: 20px;\n  border: solid;\n  border-color: palegoldenrod;\n  border-width: 5px;\n"])))),kt=(Object(D.b)(yt)(w||(w=Object(U.a)(["\n  width: 52px;\n"]))),Object(D.b)(yt)(y||(y=Object(U.a)(["\n  width: 185px;\n"]))),Object(D.b)(yt)(k||(k=Object(U.a)(["\n  width: 140px;\n"]))),Object(D.b)(yt)(E||(E=Object(U.a)(["\n  width: 200px;\n"]))),D.b.table(S||(S=Object(U.a)(["\n  border-collapse: collapse;\n  /* margin: 10px; */\n"]))),D.b.tbody(M||(M=Object(U.a)(["\n  background-color: rgb(10,150,10);\n"]))),D.b.thead(T||(T=Object(U.a)(["\n  font-weight: bold;\n  font-size: 18px;\n  background-color: rgb(10,120,10);\n"]))),D.b.h1(A||(A=Object(U.a)(["\n  font-weight: bold;\n  font-size: 45px;\n"]))),function(){return Object(jt.jsx)(B.a,{basename:"/proset",children:Object(jt.jsx)(D.a,{theme:F,children:Object(jt.jsx)(z.ApolloProvider,{client:L,children:Object(jt.jsx)("div",{className:"App",children:Object(jt.jsxs)(N.d,{children:[Object(jt.jsx)(N.b,{exact:!0,path:"/:level(4|5|6|7|8|9)",component:wt}),Object(jt.jsx)(N.a,{to:"/4"})]})})})})})});R.a.render(Object(jt.jsx)(kt,{}),document.getElementById("root"))},95:function(t,e){}},[[112,1,2]]]);
//# sourceMappingURL=main.53090ccc.chunk.js.map